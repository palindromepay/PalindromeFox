<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Palindrome Pay</title>
  <link rel="stylesheet" href="popup.css">
  <style>
    /* Toast notification styles */
    .toast-container {
      position: fixed;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 10000;
      display: flex;
      flex-direction: column;
      gap: 8px;
      width: 90%;
      max-width: 320px;
    }
    .toast {
      padding: 12px 16px;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 500;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      animation: slideIn 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .toast.success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    .toast.error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }
    .toast.warning {
      background: #fff3cd;
      color: #856404;
      border: 1px solid #ffeeba;
    }
    .toast.info {
      background: #cce5ff;
      color: #004085;
      border: 1px solid #b8daff;
    }
    @keyframes slideIn {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes slideOut {
      from { opacity: 1; transform: translateY(0); }
      to { opacity: 0; transform: translateY(-20px); }
    }
    .toast.hiding {
      animation: slideOut 0.3s ease forwards;
    }
  </style>
</head>
<body>
  <!-- Toast Container -->
  <div id="toastContainer" class="toast-container"></div>

  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <svg class="logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="9" cy="21" r="1"></circle>
          <circle cx="20" cy="21" r="1"></circle>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
      </div>
      <div class="header-actions">
        <button id="clearCartBtn" class="icon-btn danger" title="Clear Cart">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="3 6 5 6 21 6"></polyline>
            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
          </svg>
        </button>
      </div>
    </header>

    <!-- Navigation Tabs -->
    <nav class="tabs">
      <button class="tab active" data-tab="cart">
        <span>Cart</span>
        <span class="badge" id="cartBadge">0</span>
      </button>
      <button class="tab" data-tab="settings">Settings</button>
    </nav>

    <!-- Cart Tab -->
    <section id="cartTab" class="tab-content active">
      <div id="emptyCart" class="empty-state">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <circle cx="9" cy="21" r="1"></circle>
          <circle cx="20" cy="21" r="1"></circle>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
        <p>Your cart is empty</p>
        <span>Browse Amazon eGift cards and click "Pay with Palindrome Pay"</span>
      </div>

      <div id="cartItems" class="cart-items"></div>

      <div id="cartSummary" class="cart-summary hidden">
        <div class="summary-row">
          <span>Subtotal</span>
          <span id="subtotal">$0.00</span>
        </div>
        <div class="summary-row">
          <span>Delivery</span>
          <span id="deliveryFee">Free</span>
        </div>
        <div class="summary-row total">
          <span>Total (USD)</span>
          <span id="totalPrice">$0.00</span>
        </div>
        <button id="payWithCrypto" class="btn full-width" style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); color: white; display: flex; align-items: center; justify-content: center; padding: 12px;">
          <img src="logoPalindromePay.png" alt="Palindrome Pay" style="height: 24px; width: auto;" />
        </button>
      </div>
    </section>

    <!-- Settings Tab -->
    <section id="settingsTab" class="tab-content">
      <div class="settings-section">
        <h3>Gift Card Delivery Email</h3>
        <p class="settings-note">Your eGift card will be sent to this email address. Please enter it twice to confirm.</p>

        <form id="emailForm" class="email-form">
          <div class="form-group">
            <label for="recipientName">Recipient Name *</label>
            <input type="text" id="recipientName" required placeholder="John Doe">
          </div>

          <div class="form-group">
            <label for="deliveryEmail">Email Address *</label>
            <input type="email" id="deliveryEmail" required placeholder="john@example.com">
          </div>

          <div class="form-group">
            <label for="confirmEmail">Confirm Email *</label>
            <input type="email" id="confirmEmail" required placeholder="john@example.com">
          </div>

          <div id="emailError" class="form-error" style="display: none; color: #dc3545; font-size: 12px; margin-bottom: 10px;"></div>

          <button type="submit" class="btn primary full-width">Save Email</button>
        </form>

        <div id="savedEmailDisplay" class="saved-email-display" style="display: none; margin-top: 16px; padding: 12px; background: #f0fdf4; border-radius: 8px; border: 1px solid #bbf7d0;">
          <p style="margin: 0 0 4px 0; font-size: 12px; color: #166534; font-weight: 600;">Currently saved:</p>
          <p style="margin: 0; font-size: 13px; color: #15803d;" id="savedEmailText"></p>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
      <span class="powered-by-text">Powered by</span>
      <img src="palindromepay-crypto-escrow-payment.png" alt="Palindrome Pay" class="footer-logo" />
    </footer>
  </div>

  <script src="popup.js"></script>
</body>
</html>
